---
title: "Prioritizing Vernal Pool Conservation In Massachusetts"
author: "Michael Jordan"
date: "2024-01-19"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Abstract

Under Massachusetts state law, vernal pools are protected from development. However, to receive this protection, a pool must be certified by the state government. This certification is passive, requested on a volunteer basis by private citizens. The Massachusetts Department of Fish and Wildlife keeps a record of ~30K potential vernal pools that are not certified. To help citizen groups prioritize the certification of potential pools, this paper identifies hot spots of potential pools that are likely to benefit from protection and are under high risk of development.

## Introduction

Vernal pools are ephemeral bodies of water, often geographically separate from other wetlands, that typically fill in the spring and evaporate by summer (Burne & Griffin, 2005).  Because vernal pools are not filled continuously, they do not support breeding fish populations, which makes them critical habitat for amphibian and invertebrate species, particularly those that cannot complete their life cycle in the presence of fish predation (Burne & Griffin, 2005).

In the state of Massachusetts in the United States, vernal pools are understood by the state government to be a “unique and increasingly vulnerable” habitat (MA DFG, 2009). Massachusetts vernal pools are exploited by both species that use the pools on a facultative basis – such as spring peepers (Pseudacris crucifer) – and an obligate basis – such as the wood frog (Lithobates sylvaticus) (MA DFG, 2009). Of particular concern is the intricate fairy shrimp (Eubranchipus intricatus), which completes its life cycle in vernal pools (its eggs are adapted to withstand the drying of the pool) and is listed as a Species of Special Concern under the Massachusetts Endangered Species Act (NHESP, 2015).

Because of their biodiversity significance, vernal pools are protected under a variety of Massachusetts state and local laws, the most significant of which is the Wetlands Protection Act (WPA). Under the WPA, development that may impact that function of vernal pools as wildlife habitat is not permitted within 100 feet of the boundary of a vernal pool (MA DFW, 2009).  However, to qualify for WPA protection, vernal pools must meet two criteria. First, the vernal pool must fall within 100 feet of a wetland “Resource Area” that falls within WPA jurisdiction (MA DFW, 2009). Second, the vernal pool must be certified by the Natural Heritage and Endangered Species Program (NHESP) as functioning biologically as a vernal pool (MA DFW, 2009).

The requirement that a vernal pool fall within WPA jurisdictional resource area is not hugely constraining since WPA jurisdiction is fairly broad, encompassing essentially all wetlands in Massachusetts (310 CMR 10.02 § 1, 1987). However, vernal pool certification significantly constrains protection because it is a passive process conducted on a volunteer basis by private citizens, not an active process by a government body (MA DFW, 2009). If a citizen would like to request certification of a potential vernal pool, they must submit biological data to the NHESP.  Only once approved as a certified vernal pool and only once it has been established that the pool falls under WPA jurisdiction is it protected from development.

To aid the protecting vernal pools, the NHESP has developed a dataset of potential vernal pool GIS coordinates based on aerial photography that took place between 1993 and 2000 (Burne, 2001). Of course, such a dataset may suffer from errors of omission or commission. But, it offers a reasonable starting point for citizens groups interested in preserving vernal pools. However, the volume of records in this data set (29,723 as of January 18, 2024) presents a prioritization problem for citizen groups, which may have limited time and resources to devote to pool certification.

In this project, I aim to contribute to vernal pool conservation in Massachusetts by identifying which pools in the potential vernal pool dataset are more likely to benefit from certification and are more likely to be under threat. Additionally, I hope to identify geographic hot spots of such pools. This information could be used by citizen groups to better target their vernal pool conservation efforts.

## Methods
```{r import, include=FALSE, error=FALSE, warning=FALSE, message=FALSE}
library(dplyr)
library(terra)
library(sf)
library(scales)

setwd("C:/Users/Michael Jordan/Desktop/VernalPoolMiniProject")

# Import town boundary polygons, potential pool points, and wetland polygons.
ma.towns <- sf::st_read("./townssurvey_shp/TOWNSSURVEY_POLY.shp")
potential.pools <- sf::st_read("./pvp/PVP_PT.shp")
wetlands <- sf::st_read("./wetlandsdep/WETLANDSDEP_POLY.shp")

# Plot potential pools and wetlands versus town boundaries for visual
# inspection.
terra::plot(sf::st_geometry(ma.towns), col = "white")
terra::plot(
  sf::st_geometry(wetlands),
  add = TRUE,
  col = "blue")
terra::plot(
  sf::st_geometry(sf::st_zm(potential.pools)),
  add = TRUE,
  col = "green",
  pch = 17,
  cex = .5)
```

Analysis was completed using `substring(R.Version()$version.string, 1, 15)`, with GIS analysis completed using the terra and sf packages (see Rmd for full code). Data on [municipal boundaries](https://www.mass.gov/info-details/massgis-data-municipalities), [potential vernal pools](https://www.mass.gov/info-details/massgis-data-nhesp-potential-vernal-pools), and [wetland boundaries](https://www.mass.gov/info-details/massgis-data-massdep-wetlands-2005) was downloaded from the MassGIS website on January 18, 2024. Potential pools and wetlands were plotted versus municipal boundaries in the NAD83 / Massachusetts Mainland projection and visually inspected for errors.

```{r wetland, error=FALSE, warning=FALSE, message=FALSE}
# Evaluate whether potential pools fall within a wetland polygon
potential.pools$within.wetland <- lengths(
  sf::st_intersects(potential.pools, wetlands))

# Split potential pools into those that fall within a wetland and those that do
# not.  For potential pools within a wetland, set distance to wetland equal to
# zero.
pp.ww <- potential.pools[potential.pools$within.wetland == 1, ]
pp.nww <- potential.pools[potential.pools$within.wetland == 0, ]
pp.ww$dtw <- 0

# For potential pools not within a wetland, calculate the distance to the
# nearest wetland.  Join two potential pool objects to recreate overall object,
# now with distance to the nearest pool.
dist <- vector("list", length = nrow(pp.nww))
for (i in 1:nrow(pp.nww)) {
  dist[i] <- min(
    sf::st_distance(
      sf::st_geometry(pp.nww)[i],
      sf::st_geometry(wetlands)))
}
pp.nww$dtw <- dist
potential.pools <- rbind(pp.nww, pp.ww)
```

To determine which potential pools were likely to benefit from certification, I evaluated each pool's proximity to a wetland. Pool points that were inside of a wetland or within 100 feet of the nearest wetland were deemed to be likely to benefit from certification. Overall, `r scales::percent(round(nrow(potential.pools[potential.pools$dtw <= 30, ]) / nrow(potential.pools), digits = 2))` of potential pools or `r nrow(potential.pools[potential.pools$dtw <= 30, ])` overall were deemed high value.

```{r development, error=FALSE, warning=FALSE, message=FALSE}

```

## Discussion

This was necessarily an imprecise process for several reasons.  First, the WPA specifies that the boundary edge of a pool must fall within 100 feet of a wetland. But, potential pools were recorded as points in space, not as estimated pool boundaries. Second, potential pool and wetland data cover different time periods (1993-200 vs 2005), both over a decade in the past. Pool location and wetland boundaries may not coincide with their estimated parameters in these data sets today. Third, I transformed the three dimensional pool point data into two dimensional data to allow it to be interpreted versus the two dimensional wetland boundary data.

## Results

## Conclusion

## Reference List

Burne, R.B. & Griffin, C.R. (2005) Protecting vernal pools: a model from Massachusetts, USA. *Wetlands ecology and management*. Vol.13 (3), 367-375. https://doi.org/10.1007/s11273-004-7528-3

[Guidelines for The Certification of Vernal Pool Habitat](https://www.mass.gov/doc/guidelines-for-the-certification-of-vernal-pool-habitat/download) (2009), Massachusetts Division Of Fisheries & Wildlife.

[Intricate Fairy Shrimp](https://www.mass.gov/doc/intricate-fairy-shrimp/download) (2015), Natural Heritage and Endangered Species Program, Massachusetts Division Of Fisheries & Wildlife.

Burne, R.M. (2001) [Massachusetts Aerial Photo Survey of Potential Vernal Pools](https://www.mass.gov/doc/massachusetts-aerial-photo-survey-of-potential-vernal-pools/download) (2001). Natural Heritage & Endangered Species Program, Massachusetts Division of Fisheries and Wildlife.

[Wetlands Protection Act](https://www.mass.gov/doc/310-cmr-1000-the-wetlands-protection-act/download) (1987)